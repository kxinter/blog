---
title: Linux小知识
date: 2018-08-16 13:48:23
tags:
- 基础运维
- 小知识
- 运维工具
categories: 
- Linux
copyright: true
---

# 1、centos -Tab键命令补全
<!--more-->
``` javascript
$ yum install -y bash-completion

#执行脚本，使其生效或重新登录生效

$ source /usr/share/bash-completion/bash_completion
```
# 2、自定义命令补全

``` javascript
# 自定义生成kubectl命令补全

source <(kubectl completion bash)

# 将命令添加入bashrc文件，每次登录当前用户执行，使命令补全生效，也可添加入其它开机执行的脚本

echo "source <(kubectl completion bash)" >> ~/.bashrc
```

# 3、ubuntu-Tab键命令补全

编辑/etc/bash.bashrc 里面有这几行语句，去掉#注释

``` bash?linenums
#enable bash completion in interactive shells

if ! shopt -oq posix; then

  if [ -f /usr/share/bash-completion/bash_completion ]; then

    . /usr/share/bash-completion/bash_completion

  elif [ -f /etc/bash_completion ]; then

    . /etc/bash_completion

  fi

fi
```

# 4、Linux设置环境变量

在 linux 里设置环境变量的方法 （ export PATH ）

一般来说，配置交叉编译工具链的时候需要指定编译工具的路径，此时就需要设置环境变量。例如我的mips-linux-gcc编译器在“/opt/au1200_rm /build_tools/bin”目录下，build_tools就是我的编译工具，则有如下三种方法来设置环境变量：

## 4.1、直接用export命令：

立即生效，重启丢失。

``` bash?linenums
export PATH=$PATH:/opt/au1200_rm/build_tools/bin
```

查看是否已经设好，可用命令export查看：

``` bash?linenums
#export

declare -x BASH_ENV="/root/.bashrc"

declare -x G_BROKEN_FILENAMES="1"

declare -x HISTSIZE="1000"
PATH里面已经有了我要加的编译器的路径。
```

## 4.2、修改profile文件：

``` javascript
$  vi /etc/profile
在里面加入:

export PATH=”$PATH:/opt/au1200_rm/build_tools/bin”


$ . /etc/profile            #执行命令使配置生效
```

## 4.3. 修改.bashrc文件：

``` javascript
$ vi /root/.bashrc

在里面加入：
export PATH=”$PATH:/opt/au1200_rm/build_tools/bin”
```
后两种方法一般需要重新注销系统才能生效，最后可以通过echo命令测试一下：

``` bash?linenums
$ echo $PATH              #输出变量
看看输出里面是不是已经有了 /my_new_path这个路径了。
```

# 5、实时查看日志

tail -f /var/log/messages

# 6、客户端(Xshell、SecureCRT)拖拉文件到服务器

yum install lrzsz

# 7、YUM下载rpm包及依赖包

#只下载bash-completion包到home目录，不进行安装
yum install --downloadonly --downloaddir=/home bash-completion



# 8、删除多少前天备份

#删除目录/mnt/backup_data下30天前后缀为.sql的文件

find /mnt/backup_data/ -name "*.sql" -type f -mtime +30 -exec rm -f {} \;

# 9、nmon显示系统性能显示工具

``` javascript
yum install nmon

nmon
```

![enter description here](./1534402931104.png)

参考https://linux.cn/article-6467-1.html

# 10、Htop进程浏览器

yum install htop
![enter description here](2.png)

# 11、查看磁盘i/o工具

``` javascript
$ yum install sysstat

#每2秒更新一次，-m 以MB显示，-k以kb显示

iostat -d -m 2

#or

iostat -d -k 2

#or

iostat -d -m /dev/sda1
```

![enter description here](3.png)

``` javascript
yum install iotop

#c查看哪个进程占用i/o

iotop
```


使用详解参考：http://man.linuxde.net/iotop

# 12、禁止用户登录系统

``` bash
#禁止

usermod -s /bin/false ftpuser

#开启

usermod -s /bin/base ftpuser
```
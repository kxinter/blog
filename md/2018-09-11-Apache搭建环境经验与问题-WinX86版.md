---
title: Apache搭建环境经验与问题-WinX86版
tags:
  - httpd
categories:
  - Linux
date: 2018-09-11 10:13:03
---

# 1 搭建环境：
<!--more-->
OS: server 2008 Enterprise sp1（X86） ,   VMware-workstation-full-9.0.2-1031769下搭建

# 2 软件版本(X86)：

1)  VC11(VSU_4\vcredist_x86.exe) 
   http://www.microsoft.com/en-us/download/details.aspx?id=30679

2)  apache 2.4.10 (httpd-2.4.10-win32-VC11) 
   http://www.apachelounge.com/download/ 
<div class="note info"><p>apache版本并不是越新越好，不同版本apache对系统要求不一样(旧版本支持XP 、2003，新版本不支持XP、2003)</p></div>
  
3)  PHP5.6.12(php-5.6.12-win32-VC11-X86) Thread safe版本    
   http://windows.php.net/download/
<div class="note info"><p>搭建PHP与apache使用安全线程（Thread safe）搭建PHP与iis使用非安全线程版（NO Thread safe）</p></div>
 

4)  mysql5.6.26(mysql-5.6.26-win32.zip”免安装版”)

http://dev.mysql.com/downloads/mysql/

#  3 apache安装

在安装中，apache修改`httpd.conf`文件正常，未有出错，注意”`\`”要改成“`/`”,结尾新增加语句注意有`空格`，按教程走没有任何错误问题。

## 3.1 出现问题1：

在`CMD窗口`启动安装`apache`（如下图启动路径内的安装执行文件），出现

``` 
Installing the Apache2. 2 service

The Apache2. 2 service is successfully installed

 testing httpd.conf.....

 Errors reported here must be corrected before the service can be started.
```
<div class="note danger"><p>Errors reported here must be corrected before the service can be started结尾，并不是错误，而是提示：如果这行下边出现错误提示则解决错误后再启动！（当时以为是出错了）</p></div>
 
![1](1.png)
 

服务安装成功后在系统服务里面会有`apache服务`，如图
![2](2.png)


此时服务是未启动状态，可以右键启动，也可以去目录找到`ApacheMonitor.exe`打开执行
![3](3.png)


双击`ApacheMonitor.exe`
![4](4.png)

<div class="note danger"><p>点击start出现弹窗错误，the requested operation has failed</p></div>
无法启动apache服务，后来是通过在cmd命令窗口执行`netsh winsock reset `命令重启后恢复正常。方法具体内容见结尾

重启后打开apache,点击start按钮正常开启，如下图，图标变绿

![5](5.png)

# 4 问题
<div class="note info"><p>解决Apache无法启动解决 the requested operation has failed错误，方法页面</p></div>

APACHE启动出现`the requested operation has failed`，别复制其他地方的答案啊，情况不一样，`NETSTAT`和`httpd.exe -w -n "Apache" -k start`都不好使了，`80`端口好象也没问题，`2.2`版本选的也是对的，还有其他什么可能么，系统启动起来的时候就提示有一个服务启动错误应该就是APACHE的

**补充：**
![6](6.png)


`httpd.exe -w -n "Apache" -k start`提示的是没有服务，但是服务开不了啊



## 4.1 解决问题：

**原因一：80端口占用** 
例如IIS，另外就是迅雷。我的apache服务器就是被迅雷害得无法启用！

**原因二：软件冲突** 
装了某些软件会使`apache`无法启动如`Dr.com `你打开`网络连接->TcpIp属性->高级->WINS标签` 把`netbios`的`lmhosts`对勾去掉，禁用`tcp/ip`的`netbios`. 然后再启动应该就可以了。

**原因三：httpd.conf配置错误** 
如果apache的配置文件`httpd.conf`搞错了，在`windows`里启动它，会提示`the requested operation has failed `，这是比较郁闷的事，因为查错要看个半天。 
其实可以用命令行模式启动`apache`，并带上参数，`apach`e会提示你哪句有误，然后就可以针对性的解决，命令如下： `httpd.exe -w -n "Apache2" -k start`

**还有一种情况：** 
即使你这次启动了，下次你都有可能启动失败 
在运行里输入：`netsh winsock reset` （**本人通过这个命令解决问题**）
一会儿cmd会提示你重启，不用理会，现在APACHE已经可以启动了。 
其实就是一个`winsock的修复`

# 5 附件

链接: http://pan.baidu.com/s/1bo3HYIN   密码: 11ky
---
title: centos7搭建sock5代理
tags:
  - sock
  - 部署
categories:
  - Linux
date: 2018-08-30 11:50:35
---

# 1 环境
<!--more-->
OS:centos 7.3

sock5:ss5-3.8.9

# 2 安装SS5

## 2.1 安装必要组件

``` sql
yum install pam-devel openldap-devel openssl-devel  
yum install gcc gcc-c++
```

## 2.2 下载ss5

``` awk
wget https://nchc.dl.sourceforge.net/project/ss5/ss5/3.8.9-8/ss5-3.8.9-8.tar.gz
```

### 2.2.1 解压安装

``` lsl
tar -zxvf ss5-3.8.9-8.tar.gz
cd ss5-3.8.9/
./configure
make&&makeinstall
```

## 2.3 修改配置文件

``` vim
vim /etc/opt/ss5/ss5.conf
```

修改如下配置：

``` lsl
# ///////////////////////////////////////////////////////////////////////////////////
#       SHost           SPort           Authentication
#
#auth    0.0.0.0/0               -               -
#取消注释，并修改如下，意思是使用用户密码连接，默认是允许所有人连接。
auth 0.0.0.0/0 - u

# /////////////////////////////////////////////////////////////////////////////////////////////////
#      Auth     SHost           SPort   DHost           DPort   Fixup   Group   Band    ExpDate
#
#permit -       0.0.0.0/0       -       0.0.0.0/0       -       -       -       -       -       
#取消注释，并修改如下，意思是使用用户密码连接，默认是允许所有人连接。
permit u 0.0.0.0/0 - 0.0.0.0/0 - - - - -
```

## 2.4 修改默认端口号

``` groovy
vim /etc/rc.d/init.d/ss5
```

修改脚本如下

``` nginx
#默认端口号为1080，修改为10888
daemon /usr/sbin/ss5 -t $SS5_OPTS
修改为
daemon /usr/sbin/ss5 -t $SS5_OPTS -b 0.0.0.0:10888
```

## 2.5 添加帐号密码

``` groovy
vim /etc/opt/ss5/ss5.passwd
```

> 格式:  用户+密码



## 2.6 启动ss5

``` nginx
chmod 700 /etc/rc.d/init.d/ss5       #添加执行权限
service ss5 start                    #启动服务
chkconfig ss5 on                     #开机自启
```

## 2.7 检测启动

``` x86asm
[root@blog ss5-3.8.9]# netstat -tunlp|grep ss5
tcp        0      0 0.0.0.0:10888           0.0.0.0:*               LISTEN      22387/ss5
```

安装完成。

可使用sock5客户端proxifier等进行连接。
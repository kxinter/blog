---
title: Centos7创建分区及扩展分区
tags:
  - 分区
categories:
  - Linux
copyright: true
password: 123456
date: 2018-09-10 16:39:49
---

# 1 添加硬盘并挂载
<!--more-->
## 1.1 查询硬盘信息

（如果使用的是新加硬盘，可以在最下方看到硬盘信息，例子使用本地空闲空间）

例如：
![1](1.png)


``` elixir
 [root@bogon /]# fdisk -l
```
![2](2.png)


``` elixir
[root@bogon /]# df –h
```
![3](3.png)




## 1.2 Fdisk创建分区

``` elixir
[root@bogon /]# fdisk /dev/sda
```
![4](4.png)

![5](5.png)

## 1.3 查看硬盘信息

``` elixir
[root@bogon /]# fdisk –l
```
![6](6.png)

## 1.4 Partprobe刷新分区表（注：最好每做一步遇到找不到问题都刷新一下）

``` elixir
[root@bogon /]# partprobe
```



## 1.5 创建物理卷（PV）

使用` pvcreate` 命令创建物理卷，`pvdisplay` 查看物理卷信息：

 

``` dockerfile
[root@bogon /]# pvcreate /dev/sda2

  Physical volume "/dev/sda2" successfully created
  
[root@bogon /]# pvdisplay
```
![7](7.png)



## 1.6 将PV加入卷组（VG）

使用` vgdisplay` 查看卷组信息，下图显示卷组名为`centos`，空闲大小为`0`：

![8](8.png)

使用 `vgextend` 命令把`/dev/vdb1`加入到`centos`：

``` elixir
[root@bogon /]# vgextend centos /dev/sda2
```
![9](9.png)

## 1.7 创建逻辑卷（LV）

使用` lvcreate` 命令从卷组里划分一个新的逻辑卷，这里创建了名称为`newlv`，大小9GB的逻辑卷分区；使用`lvdisplay` 查看逻辑卷信息：

``` elixir
[root@bogon /]# lvcreate -L 9G -n newlv centos


WARNING: xfs signature detected on /dev/centos/newlv at offset 0. Wipe it? [y/n]: y

Wiping xfs signature on /dev/centos/newlv.

Logical volume "newlv" created.
```


``` elixir
[root@bogon /]# lvdisplay
```
![10](10.png)
![11](11.png)

``` elixir
[root@bogon /]# vgdisplay
```
![12](12.png)

## 1.8 格式化逻辑卷并挂载

新逻辑卷经过格式化就可以挂载到系统里存储数据了。使用` mkfs.xfs` 格式化为CentOS7的`xfs`文件系统：

``` groovy
[root@bogon /]# mkfs.xfs /dev/centos/newlv
```
![13](13.png)


创建`drbd`目录，并挂载到`/drbd`目录，挂载后查询容量为9个G.

![14](14.png)

设置开机自动挂载，编辑 `/etc/fstab `文件，加入最后一行：

![15](15.png)




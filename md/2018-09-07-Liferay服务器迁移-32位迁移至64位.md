---
title: Liferay服务器迁移(32位迁移至64位)
tags:
  - liferay
categories:
  - Linux
copyright: true
date: 2018-09-07 17:39:11
---

# 1 原运行环境：
<!--more-->
系统：CentOS 6.4 32位

Liferay:32位版本  bitnami-liferay-6.2-7-linux-installer

# 2 新运行环境：

系统：CentOS7.2 64位

Liferay:由原软件目录直接拷贝到新系统，修改java、apache-tomcat目录为64位安装版目录，迁移数据和配置文件：/opt/liferay/apache-tomcat/temp     /opt/liferay-6.2-7/apache-tomcat.bak/webapps/liferay/WEB-INF/classes/ portal-ext.properties

# 3 新系统运行32位软件需安装

64位系统运行32位软件，需要安装32位运行库等。

``` css
yum install glibc.i686

yum install xulrunner.i686
```

 

安装后访问平台流程插件需要重新安装，否则流程工作台无法正常工作及显示。



Liferay 集成公司OA流程控制台方法：

1.       用管理员登录liferay，进入应用程序管理页面，上传流程控制台插件，然后安装。如下图
![1](1.png)


2.       安装完后，可以在程序管理页面看到安装后的插件，如下图。
![2](2.png)

3.       切换到站点首页，添加页面内容，然后把任务提醒拉到要显示的位置，如下图：
![3](3.png)


4.       ssh登录到服务器，将`/opt/liferay-6.2-7/apache-tomcat/webapps/workflow-portlet`目录备份更名，然后解压`workflow-portlet20170208.tar.gz`到`/opt/liferay-6.2-7/apache-tomcat/webapps/workflow-portlet`目录，如下图。 解压后，重启liferay。

![4](4.png)

5.       在服务器上再次部署流程控制台web服务器tomcat。将tomcat程序复制到服务器/opt目录下，然后调整tomcat的端口，避免和liferay的tomcat端口冲突。修改/opt/tomcat7/conf/server.xml 文件。

修改位置：

![5](5.png)
![6](6.png)
![7](7.png)

6.       tomcat配置好后，找研发人员要最新版本的流程开发程序包。文件名：DeWorkFlow.war。 将此文件放在/opt/tomcat7/webapps 目录下。如下图：
![8](8.png)


> 备注：DeWorkFlow.war插件公司内部提供。

